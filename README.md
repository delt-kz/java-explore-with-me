# Explore With Me (учебный проект)

## Краткое описание
Учебное серверное приложение, разбитое на два микросервиса: основной сервис событий и сервис статистики обращений. Код предназначен для отработки базовых навыков построения REST API на Spring Boot и взаимодействия между сервисами через HTTP-клиент. Проект не является готовым продуктом и не рассчитан на эксплуатацию в продакшене.

## Цель проекта
- Практика разработки на Java 21 с использованием Spring Boot 3.
- Отработка типовой слоистой архитектуры (контроллеры, сервисы, репозитории, DTO/mapper).
- Работа с PostgreSQL через Spring Data JPA и инициализацию схемы.
- Обмен данными между сервисами (основной сервис использует stats-client для записи статистики).

## Технологии и зависимости
- Java 21, Maven (мульти-модульный билд).
- Spring Boot 3 (Web, Validation, Data JPA, Actuator).
- PostgreSQL в качестве СУБД.
- Lombok для генерации бойлерплейта.
- JaCoCo, Checkstyle, SpotBugs в профилях Maven.
- Docker и Docker Compose для локального развертывания.

## Структура проекта
- `pom.xml` — корневой Maven-модуль и общее управление плагинами/профилями.
- `ewm-service/` — основной сервис (порт 8080): пакеты `category`, `compilation`, `event` (включая `review`), `request`, `user`, `exception`, `util` содержат контроллеры, DTO, сервисы и сущности доменной модели.
- `stats-parent/` — родительский модуль статистики:
  - `stats-service/` — сервис сбора статистики обращений (порт 9090) с контроллерами, сервисным слоем и репозиториями.
  - `stats-client/` — HTTP-клиент, которым пользуется основной сервис для записи хитов.
  - `stats-dto/` — общие DTO для обмена между сервисами.
- `docker-compose.yml` — сборка и запуск двух сервисов и двух экземпляров PostgreSQL.
- `ewm-main-service-spec.json`, `ewm-stats-service-spec.json` — OpenAPI-спецификации, соответствующие ожидаемым REST-контрактам.

## Локальный запуск
### Вариант 1: Docker Compose
1. Собрать артефакты: `mvn clean package -DskipTests`.
2. Запустить контейнеры: `docker compose up --build`.
3. Сервисы доступны по умолчанию:
   - основной сервис — `http://localhost:8080`
   - сервис статистики — `http://localhost:9090`
   - базы данных — PostgreSQL на `localhost:5433` (ewm) и `localhost:5432` (stats) с пользователями/паролями из `docker-compose.yml`.

### Вариант 2: Запуск из IDE
1. Убедиться, что локально подняты PostgreSQL-инстансы с параметрами из `ewm-service/src/main/resources/application.properties` и `stats-parent/stats-service/src/main/resources/application.properties`.
2. Стартовать `ru.practicum.ewm.StatsApp` (порт 9090), затем `ru.practicum.ewm.EwmApp` (порт 8080).

## Ограничения и оговорки
- Проект учебный: нет гарантий безопасности, отказоустойчивости, полноты валидации и производительности.
- Тестовое окружение и данные не подготовлены для реальной нагрузки.
- Документация по API ограничена предоставленными OpenAPI-файлами; актуальность контрактов требует дополнительной проверки по коду.
- Настройки БД и сервисов ориентированы на локальные/контейнерные сценарии и не подходят для продакшена без доработок.

